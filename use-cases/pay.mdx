---
title: 'Pay'
description: 'Accept stablecoin payments from any chain with automatic bridging and swapping.'
icon: 'bolt'
---

## Stablecoin Payments

Accept USDC, USDT, or any token as payment. Your user pays with whatever they have—Trails handles the conversion automatically.

| You Settle In | User Pays With | Trails Handles |
|--------------|----------------|----------------|
| USDC on Polygon | ETH on Arbitrum | Bridge + Swap |
| USDT on Polygon | USDC on Base | Bridge + Swap |
| USDC on Polygon | DAI on Optimism | Bridge + Swap |

## USDC Payment Examples

### Accept USDC on Polygon

Settle in USDC on Polygon—users pay from any chain:

```tsx
import { TrailsWidget } from '0xtrails/widget'

<TrailsWidget
  apiKey="YOUR_API_KEY"
  mode="pay"
  toAddress="0xYOUR_MERCHANT_ADDRESS"
  toAmount="25"
  toChainId={137} // Polygon
  toToken="USDC"
  onCheckoutComplete={({ sessionId }) => {
    // Mark order as paid
    updateOrderStatus(orderId, 'paid', sessionId)
  }}
>
  <button>Pay $25</button>
</TrailsWidget>
```

### Accept USDT on Polygon

For merchants preferring USDT settlement on Polygon:

```tsx
<TrailsWidget
  apiKey="YOUR_API_KEY"
  mode="pay"
  toAddress="0xYOUR_MERCHANT_ADDRESS"
  toAmount="100"
  toChainId={137} // Polygon
  toToken="USDT"
  onCheckoutComplete={({ sessionId }) => {
    confirmPayment(sessionId)
  }}
>
  <button>Pay $100 in USDT</button>
</TrailsWidget>
```

### Cross-Chain USDC with CCTP (Polygon Settlement)

Use Circle's Cross-Chain Transfer Protocol for native USDC bridging:

```tsx
<TrailsWidget
  apiKey="YOUR_API_KEY"
  mode="pay"
  toAddress="0xYOUR_MERCHANT_ADDRESS"
  toAmount="500"
  toChainId={137} // Polygon
  toToken="USDC"
  bridgeProvider="CCTP" // Native USDC bridging
  onCheckoutComplete={({ sessionId }) => {
    processLargePayment(sessionId)
  }}
>
  <button>Pay $500</button>
</TrailsWidget>
```

## Merchant Integration Pattern

Complete ecommerce checkout flow with order verification:

```tsx
import { TrailsWidget } from '0xtrails/widget'
import { useState } from 'react'

export function CheckoutButton({ order }) {
  const [status, setStatus] = useState('pending')

  return (
    <TrailsWidget
      apiKey={process.env.TRAILS_API_KEY}
      mode="pay"
      toAddress={process.env.MERCHANT_WALLET}
      toAmount={order.total.toString()}
      toChainId={137} // Polygon
      toToken="USDC"
      onCheckoutStart={({ sessionId }) => {
        // Create pending payment record
        createPaymentRecord({
          orderId: order.id,
          sessionId,
          amount: order.total,
          status: 'processing'
        })
        setStatus('processing')
      }}
      onCheckoutComplete={async ({ sessionId }) => {
        // Verify payment on your backend
        const verified = await verifyPayment(sessionId)
        if (verified) {
          await fulfillOrder(order.id)
          setStatus('complete')
        }
      }}
      onCheckoutError={({ sessionId, error }) => {
        logPaymentError(sessionId, error)
        setStatus('failed')
      }}
    >
      <button disabled={status === 'processing'}>
        {status === 'processing' ? 'Processing...' : `Pay $${order.total}`}
      </button>
    </TrailsWidget>
  )
}
```

### Backend Payment Verification

Verify payments server-side before fulfilling orders:

```typescript
// api/verify-payment.ts
import { Trails } from '@0xtrails/api'

const trails = new Trails({ accessKey: process.env.TRAILS_ACCESS_KEY })

export async function verifyPayment(sessionId: string, expectedAmount: string) {
  const receipt = await trails.getIntentReceipt({ intentId: sessionId })

  // Verify the payment completed successfully
  if (receipt.status !== 'COMPLETED') {
    return { verified: false, reason: 'Payment not completed' }
  }

  // Verify the amount matches
  const receivedAmount = receipt.destinationTransaction?.amount
  if (receivedAmount !== expectedAmount) {
    return { verified: false, reason: 'Amount mismatch' }
  }

  return { verified: true, receipt }
}
```

## Fee Estimation

Show users the total cost before they commit to a payment.

### Using the useQuote Hook

```tsx
import { useQuote } from '0xtrails'

function PaymentPreview({ amount, recipientAddress }) {
  const { quote, isLoading, error } = useQuote({
    mode: 'pay',
    toAddress: recipientAddress,
    toAmount: amount,
    toChainId: 137,
    toToken: 'USDC',
  })

  if (isLoading) return <div>Calculating fees...</div>
  if (error) return <div>Unable to estimate fees</div>

  const { originAmount, fees } = quote

  return (
    <div className="fee-breakdown">
      <div>Payment amount: ${amount} USDC</div>
      <div>Network fees: ${fees.gasFee} {fees.gasFeeToken}</div>
      <div>Total from wallet: {originAmount} {quote.originToken}</div>
    </div>
  )
}
```

### API-Based Fee Estimation

For server-side fee estimation or custom UIs:

```typescript
const quote = await fetch('https://trails-api.sequence.app/rpc/Trails/QuoteIntent', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'X-Access-Key': 'YOUR_ACCESS_KEY'
  },
  body: JSON.stringify({
    ownerAddress: userWallet,
    originChainId: 137, // User's funds on Polygon
    originTokenAddress: '0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174', // USDC on Polygon
    destinationChainId: 8453, // Settle on Base
    destinationTokenAddress: '0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913', // USDC on Base
    destinationToAddress: merchantAddress,
    destinationTokenAmount: '100000000', // 100 USDC (6 decimals)
    tradeType: 'EXACT_OUTPUT',
    options: {
      slippageTolerance: 0.005 // 0.5%
    }
  })
})

const { intent } = await quote.json()

// Extract fee information
const fees = {
  gasFee: intent.gasFee,
  bridgeFee: intent.bridgeFee,
  totalInput: intent.originAmount,
  estimatedOutput: intent.destinationAmount
}
```

## Supported Stablecoins

| Stablecoin | Ethereum | Base | Arbitrum | Polygon | Optimism |
|------------|----------|------|----------|---------|----------|
| USDC | ✓ | ✓ | ✓ | ✓ | ✓ |
| USDT | ✓ | ✓ | ✓ | ✓ | ✓ |
| DAI | ✓ | ✓ | ✓ | ✓ | ✓ |

<Note>
For the complete list of supported tokens and chains, see [Supported Chains](/resources/supported-chains).
</Note>

## Next Steps

<CardGroup cols={2}>
  <Card title="Pay Mode Reference" icon="code" href="/sdk/modes/pay">
    Complete configuration options and props
  </Card>
  <Card title="Gasless Payments" icon="gas-pump" href="/examples/gasless">
    Let users pay fees in stablecoins
  </Card>
  <Card title="x402 Payments" icon="globe" href="/examples/x402">
    HTTP 402 payment flows
  </Card>
  <Card title="SDK Hooks" icon="hook" href="/sdk/hooks">
    useQuote, usePay, and more
  </Card>
</CardGroup>
