# Trails

> Trails is a chain abstraction protocol for crypto payments. Accept any token from any chain, settle in stablecoins (USDC/USDT). One SDK integration, one user confirmation.

## Overview

Trails handles cross-chain routing, swaps, and bridging so users can pay with any token they hold. The protocol uses an intent-based architecture: users express their desired outcome (e.g., "pay 100 USDC to merchant"), and relayers execute the optimal path.

**Key capabilities:**
- Accept payments in any token, receive stablecoins
- Cross-chain token swaps with aggregated liquidity
- DeFi deposits from any starting token (Aave, Morpho)
- Gasless transactions using USDC/USDT as fee token
- Smart contract calls with attached payments

**SDK modes:**
- `pay`: Exact-output payments. Specify what recipient receives, user pays from any token.
- `swap`: Cross-chain token exchange. User controls input/output selection.
- `fund`: Deposit flows for protocols, chains, exchanges. Input-driven with fiat onramp.
- `earn`: DeFi yield deposits into vaults and lending protocols.

## Quick Start

```tsx
import { TrailsWidget } from '0xtrails/widget'

<TrailsWidget
  apiKey="YOUR_API_KEY"
  mode="pay"
  toAddress="0xMerchant"
  toAmount="100"
  toChainId={8453}
  toToken="USDC"
/>
```

## API Flow

1. `QuoteIntent` - Get rates and routing for a transaction
2. `CommitIntent` - Lock in the quote (reserves rates)
3. `ExecuteIntent` - Execute with deposit tx hash or permit signature
4. `WaitIntentReceipt` - Monitor until completion

Base URL: `https://trails-api.sequence.app/rpc/Trails/`

## Common Integration Patterns

**Payment with callback:**
```tsx
<TrailsWidget
  mode="pay"
  toAddress="0x..."
  toAmount="10"
  toChainId={8453}
  toToken="USDC"
  onCheckoutComplete={({ sessionId }) => updateOrderStatus(sessionId)}
/>
```

**Smart contract call with payment:**
```tsx
<TrailsWidget
  mode="pay"
  toAddress="0xContractAddress"
  toAmount="0.01"
  toChainId={42161}
  toToken="ETH"
  toCalldata={encodedFunctionData}
/>
```

**Headless with useQuote hook:**
```tsx
const { quote, swap } = useQuote({
  walletClient,
  fromTokenAddress, fromChainId,
  toTokenAddress, toChainId,
  swapAmount, tradeType,
  toRecipient, slippageTolerance,
})
```

## SDK Documentation

- [Getting Started](https://docs.trails.build/get-started): Install SDK, first payment
- [Pay Mode](https://docs.trails.build/sdk/modes/pay): Exact-output payment flows
- [Swap Mode](https://docs.trails.build/sdk/modes/swap): Cross-chain token swaps
- [Fund Mode](https://docs.trails.build/sdk/modes/fund): Deposit and onramp flows
- [Earn Mode](https://docs.trails.build/sdk/modes/earn): DeFi yield integrations
- [Configuration](https://docs.trails.build/sdk/configuration): Widget props and customization
- [Hooks](https://docs.trails.build/sdk/hooks): useQuote, useTokenBalances, useCheckout

## API Reference

- [QuoteIntent](https://docs.trails.build/api-reference/endpoints/quote-intent): Get transaction quote
- [CommitIntent](https://docs.trails.build/api-reference/endpoints/commit-intent): Lock quote
- [ExecuteIntent](https://docs.trails.build/api-reference/endpoints/execute-intent): Execute transaction
- [GetIntentReceipt](https://docs.trails.build/api-reference/endpoints/get-intent-receipt): Get transaction status
- [WaitIntentReceipt](https://docs.trails.build/api-reference/endpoints/wait-intent-receipt): Stream updates
- [GetChains](https://docs.trails.build/api-reference/endpoints/get-chains): Supported chains
- [GetTokenList](https://docs.trails.build/api-reference/endpoints/get-token-list): Available tokens

## Key Types

```typescript
type TradeType = 'EXACT_INPUT' | 'EXACT_OUTPUT'
type RouteProvider = 'AUTO' | 'LIFI' | 'RELAY' | 'CCTP' | 'SUSHI' | 'ZEROX'
type IntentStatus = 'PENDING' | 'PROCESSING' | 'SUCCEEDED' | 'FAILED'
```

## Optional

- [Gasless Transactions](https://docs.trails.build/examples/gasless): Pay fees in USDC/USDT
- [Transaction History](https://docs.trails.build/examples/transaction-history): Track user intents
- [Supported Chains](https://docs.trails.build/resources/supported-chains): Chain and token coverage
- [MCP Server](https://docs.trails.build/resources/llm-integration): AI agent integration at docs.trails.build/mcp
