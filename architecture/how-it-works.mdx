---
title: 'How Trails Works'
description: 'Core architecture and design of the Trails transaction rails protocol'
icon: 'sitemap'
---

Trails offers developers a solution to enable 1-click crypto experiences via any wallet, token and chain. Trails aims to make EVM chains "work as one" by solving the widespread chain, token, and wallet fragmentation problems by providing a multichain transaction orchestration layer on top of wallets powered by intents that unifies all chains and automates token routing, all with a single end-user confirmation (1-click).

## Overview

Trails automatically determines the optimal path for cross-chain transaction execution, whether it's a simple single-chain transaction or a complex multi-step orchestration involving swaps, bridges, and executions across different blockchains.

Trails is built on the [Sequence](https://docs.sequence.xyz) wallet stack combining the powers of account abstraction, real-time indexing, and gasless transaction execution into an intent-powered chain abstraction solution. Trails is designed to work with any wallet, including a simple EOA wallet, a powerful smart wallet or an in-app embedded wallet (ie. MetaMask, Wallet Connect, Privy, Coinbase Smart Wallet, etc). For more details under-the-hood, please see the [protocol architecture](/architecture/protocol) section.

The protocol is designed to be extensible, with plans to support non-EVM chains in the future.

## Step-by-Step Flow

<Steps>
  <Step title="Define Intent">
    **Create a payment transaction for any chain in any token**
    
    Users begin by defining their payment intent - whether it's a mint, deposit, swap, or any other transaction type. This intent can be created for any supported blockchain using any supported token.

  </Step>

  <Step title="Trails Inspects">
    **Determines if orchestration is needed**
    
    Trails's intelligent orchestration engine analyzes the defined intent to determine the optimal execution path:

    - **Pass Through**: If the transaction can succeed without orchestration (same chain, sufficient balance, etc.), it passes through directly
    - **Continue Orchestrating**: If cross-chain operations or token swaps are needed, the system continues to the orchestration process

    <Note>
      This inspection happens in milliseconds and considers factors like:
      - Available token balances
      - Gas requirements
      - Chain compatibility
      - Protocol availability
    </Note>
  </Step>

  <Step title="Select Route">
    **Trails suggests optimal routing options**
    
    When orchestration is required, Trails analyzes available routes across chains and presents the optimal options:

    - **Automated Suggestions**: The system suggests the most efficient token and chain combinations
    - **User Customization**: Users can review and customize the suggested route
    - **Cost Analysis**: Each route option includes gas costs, fees, and estimated execution time

    <Tip>
      Users maintain full control over the routing decision while benefiting from Trails's optimization algorithms.
    </Tip>
  </Step>

  <Step title="Orchestrate Payment">
    **Intelligently combine operations for the selected route**
    
    Once the route is confirmed, Trails orchestrates the necessary operations:

    - **Swap Operations**: Convert tokens to the required format
    - **Bridge Transactions**: Move assets between chains when needed
    - **Execution Preparation**: Set up the final transaction parameters

  </Step>

  <Step title="Execute Transaction">
    **User confirms and completes the end-to-end flow**
    
    The final step puts control back in the user's hands:

    - **Wallet Confirmation**: User reviews and confirms the transaction through their connected wallet
    - **End-to-End Execution**: Trails executes the complete orchestrated flow
    - **Transaction Completion**: The system handles all intermediate steps and delivers the final result

    <Info>
      Users only need to sign once, but Trails may execute multiple transactions behind the scenes to complete the orchestrated payment.
    </Info>
  </Step>
</Steps>


## Key Benefits

<CardGroup cols={2}>
  <Card title="Simplified UX" icon="hand-sparkles">
    Users interact with a simple interface while Trails handles complex cross-chain orchestration
  </Card>
  <Card title="Optimal Routing" icon="route">
    Intelligent algorithms find the most efficient paths across chains and protocols
  </Card>
  <Card title="Cost Effective" icon="dollar-sign">
    Minimizes fees and gas costs through smart routing and batching
  </Card>
  <Card title="Secure" icon="shield-check">
    Non-custodial architecture ensures users maintain control of their assets
  </Card>
</CardGroup>


## Technical Architecture

The Trails protocol leverages several key components:

- **Intent Recognition**: Parses and understands user payment intentions
- **Route Optimization**: Calculates optimal paths across supported chains
- **Protocol Integration**: Interfaces with DEXs, bridges, and other protocols
- **Transaction Orchestration**: Coordinates complex multi-step operations
- **Execution Engine**: Handles the actual transaction execution and monitoring


## Integration with External Protocols & Liquidity Networks

- **Trails as an Orchestrator**: Trails does not custody funds or act as a bridge/DEX itself. It orchestrates flows across existing liquidity networks and chains, acting as the glue that connects them so they work seamlessly as one.
- **Liquidity Providers (LPs) & DEXs**: Trails taps into AMMs, bridges, and LPs to source liquidity and pricing, selecting the optimal venue per step of the route, providing the best price and gas efficiency possible for the end-user.
- **Pluggable Architecture**: New protocols, bridges, and networks can be added without changing integrator code. Trails evaluates options at runtime and selects the safest, most efficient path, giving the developer full control over the flow.

<Note>
  Trails is responsible for orchestrating the flow, not holding user assets. It coordinates protocols so users can transact with a single click (one transaction on the original chain), while assets move through underlying networks.
 </Note>

## Refunds

Trails has an automatic refund mechanism built in to protect your assets in the event of a transaction failure.

| Failure Scenario | Refund Action |
|------------------|---------------|
| **Failure on the Source Chain** | If the transaction fails before your funds leave the initial blockchain, the user will receive a full refund (minus gas fees) on the source chain to the sender address. |
| **Failure on the Destination Chain** | If the funds successfully bridged but the final step fails on the destination chain, the assets are refunded to your sender address on the destination chain. |

## Security & Validation

- **Built on Sequence v3**: Trails is built on top of Sequence's audited v3 wallet contracts, leveraging mature account abstraction and battle-tested controls.
- **Intent-Scoped Authorization**: Intent addresses are only used to trustlessly authorize the specific transaction calldata the user has explicitly permitted—nothing more.
- **User “sudo” Control**: The user always retains control over their account and funds. In emergencies, they can take direct action at any time.
- **Non-Custodial by Design**: Trails never takes custody; execution happens via the user's wallet permissions, preserving full control and auditability.
